function ShowPageLoader(){$(".site-loader").show()}function HidePageLoader(){$(".site-loader").hide()}var BTCPayServerStream=BTCPayServerStream||{};BTCPayServerStream.ShowDialog=function(n,t,i,r,u){$("#"+i).html("");$("#"+r).html('<div class="loader loader-wrapped"><div><\/div><div><\/div><div><\/div><div><\/div><\/div>');$.ajax({type:n,data:u,url:t,cache:!1,success:function(n){$("#"+r).removeClass("modal-loading");$("#"+i).hide().html(n.title).fadeIn("fast");$("#"+r).hide().html(n.content).fadeIn("fast")},error:function(){$("#"+r).html("Error while sending data to server.")}})};BTCPayServerStream.SetFilesEvents=function(n){$(n).find("input[type=file]").on("change",function(){$(this).next("span.selected-value").html($(this).val().split("\\").pop())});$(n).find("span.file-clear").on("click",function(){$(this).parent().children("input").val("");$(this).parent().children("span.selected-value").html("")})};BTCPayServerStream.MessageContext={ERROR:0,WARNING:1,INFO:2,SUCCESS:3};BTCPayServerStream.AddFlashMessage=function(n,t,i){var r="alert",u,f;typeof t=="undefined"&&(t=2);typeof i!="undefined"&&i===!0&&(r+=" alert-dismissable");switch(t){case 0:r+=" alert-danger";break;case 1:r+=" alert-warning";break;case 2:r+=" alert-info";break;case 3:r+=" alert-success"}u='<div class="'+r+'">';typeof i!="undefined"&&i===!0&&(u+='<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;<\/a>');u+=n+"<\/div>";f=$("#FlashMessages .container");f.hide();typeof i!="undefined"&&i===!0?f.html(u).fadeIn():f.html(u).fadeIn().delay(1e3).fadeOut()};BTCPayServerStream.SwitchLocalization=function(n){ShowPageLoader();var t={};t.culture=n;$.ajax({type:"POST",data:t,url:"/Localization/SetLanguage",cache:!1,success:function(){location.reload()},error:function(){}})},function(n){function t(n){n.find(".is-invalid").removeClass("is-invalid");n.find(".input-validation-error").removeClass("input-validation-error");n.find("span.text-danger").html("")}n.fn.AjaxForm=function(i){var r=this,u=this.attr("action"),f=this.attr("method");return r.submit(function(e){e.preventDefault();ShowPageLoader(!0);r.ajaxSubmit({url:u,type:f,success:function(u){var f,e,o;if(t(r),u.success===!0)if(typeof u.conditioned!="undefined"&&u.conditioned===!0){if(typeof i!="undefined"&&typeof i.onCondition=="function")i.onCondition(u.conditions);else for(f=0;f<u.conditions.length;f++){n("#"+u.conditions[f].field+"Group").length&&n("#"+u.conditions[f].field+"Group").remove();n("#"+u.conditions[f].formGroup).after('<div class="form-group" id="'+u.conditions[f].field+'Group"><div id="'+u.conditions[f].field+'Btn" data-inputField="'+u.conditions[f].inputField+'" class="form-control btn btn-default">'+u.conditions[f].buttonText+"<\/div><\/div>");n("#"+u.conditions[f].field+"Btn").on("click",function(){var t=n(this).attr("id").replace("Btn","");n("#"+t).val("True");n("span[data-condition-group="+t+"]").html("");n(this).parent().remove()});n("span[data-valmsg-for="+u.conditions[f].inputField+"]").html(u.conditions[f].message)}HidePageLoader()}else if(typeof i!="undefined"&&typeof i.onSuccess=="function"){i.onSuccess(u);(typeof i.preventHigingLoader=="undefined"||i.preventHigingLoader===!1)&&HidePageLoader();typeof u.data!="undefined"&&u.data!==null&&typeof u.data.message!="undefined"&&BTCPayServerStream.AddFlashMessage(u.data.message,BTCPayServerStream.MessageContext.SUCCESS)}else window.location=u.url;else{for(HidePageLoader(),e=0;e<u.errors.length;e++)n("input[name="+u.errors[e].field+"]").addClass("is-invalid"),n("textarea[name="+u.errors[e].field+"]").addClass("is-invalid"),n("input[name="+u.errors[e].field+"]").parent(".people-picker-container").addClass("input-validation-error"),o=n("input[name="+u.errors[e].field+"]").parent(),o.hasClass("file-area-field")&&o.addClass("input-validation-error"),n("select[name="+u.errors[e].field+"]").addClass("is-invalid"),n("span[data-valmsg-for="+u.errors[e].field+"]").html(u.errors[e].message);typeof i!="undefined"&&typeof i.onInvalid=="function"&&i.onInvalid()}},error:function(){HidePageLoader();n(".modal").modal("hide");BTCPayServerStream.AddFlashMessage("Something went wrong.",BTCPayServerStream.MessageContext.ERROR,!0)}})}),this}}(jQuery);